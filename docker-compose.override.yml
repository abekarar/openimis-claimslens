# Development overrides â€” hot reload, volume mounts, debug logging
services:
  api:
    build:
      target: api
    volumes:
      - ./backend/src:/app/src:ro
    environment:
      - CLAIMLENS_DEBUG=true
      - CLAIMLENS_LOG_LEVEL=DEBUG
    command: uvicorn claimlens.main:app --host 0.0.0.0 --port 8000 --reload --reload-dir /app/src

  worker:
    build:
      target: worker
    volumes:
      - ./backend/src:/app/src:ro
    environment:
      - CLAIMLENS_DEBUG=true
      - CLAIMLENS_LOG_LEVEL=DEBUG
    command: celery -A claimlens.worker.app:celery_app worker --loglevel=DEBUG --concurrency=2

  frontend:
    build:
      target: deps
    volumes:
      - ./frontend/src:/app/src
      - ./frontend/public:/app/public
    command: npm run dev
    environment:
      - NODE_ENV=development
